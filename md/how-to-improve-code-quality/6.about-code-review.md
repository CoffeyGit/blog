# 关于Code Review

> Code Review不只是一种方法，也是开发者特有的沟通方式，更是一种团队文化。

## Code Review的意义

 >- 交叉排查缺陷 - 绝大多数BUG都可以在代码层面被发现，甚至测试难以覆盖到的深层次BUG也可以通过团队成员相互审核而避免
 >- 提高代码质量 - Code Review意味着开发者要接受团队成员的建议与监督，在完成功能的基础之上不断完善代码结构
 >- 加强团队协作 - 团队成员在相互督促与改进中共同成长

国外一流的公司都是有完备的Code Review流程的, 国内只要把这块能做起来的, 随便就可以拿出来吹一吹了

## 有这些好处, 为啥 Code Review 还是难执行?

我本人这方面也遇到过不少问题, 也有很多困扰.
大致是这几种:

- 不能被看到直接产出
- 不能提升绩效
- 代码变更频繁投入时间review没意义
- 进行review的人还要花精力了解对应的功能需求, 耗费时间
- 代码不规范, 太多无意义review
- commit方式不规范: 让review变得困难

总结一句话: 总是投入没有回报的事让人坚持真的是强人所难。

所以得想个办法，因地制宜，讲究个方式。

## 措施

- 做需求前先讨论, 定好方案, 定好后方案要持久化
- 提交规范要落地(standard-version): 一个commit对应一个需求, 杜绝一次提交夹带无关联改动或者几个需求一次提交的情况。
- 代码规范(clean-code-typescript + ts-lint + sonar): 自动化流程解决规范不统一和基础质量问题, 不过自动检查的代码不得合并, 进不到code review这一步， 能自动的就不要人肉。
- 到了code review这一步，主要关心代码有没有按照既定方案实现, 有没有明显的bug, 代码组织有没有改善空间?
- 重点代码: 每个迭代/双周/月度对具有代表性的代码集体评审，重点在于解决团队共性问题，讨论改进方法
- 新人重点review
  
## 意识

>- 代码是团队共有的知识财富，而不是个人的私有地
>- 所有人对所有代码的最终质量负责，而非某个人对某些代码负责
>- 完成功能只是开始，代码需要持续改进以符合团队标准
>- Code Review对于团队中的新人来说是很好的锻炼机会

## 注意事项

>- Code Review不能形式化，没看过PR、没改进意见不能通过
>- PR被打回不是丢面子的事情，被提改进建议也不是批评，对事不对人
>- 将别人提交的代码视作自己将维护的代码，个人标准与集体标准对齐

## 总结

> Code Review体现的是团队对于代码质量的追求，对于团队内部协作的重视。对于新手来讲，对于日常工作的钻研与打磨比偶尔一次的技术培训或分享更有学习价值。
